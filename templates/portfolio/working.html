<!--<form id="nameForm">
    <label for="name">Enter your name:</label>
    <input type="text" id="name" name="name" autocomplete="off">
    <div id="status"></div> <!-- Status message to show success/failure -->
<!-- </form> -->

<!-- <script>
    let timeout = null;

    // Debounce function: waits for 2 seconds of inactivity before sending data
    document.getElementById('name').addEventListener('input', function () {
        clearTimeout(timeout); // Clear the previous timer
        let nameValue = this.value;

        // Set a timeout to wait for 2 seconds
        timeout = setTimeout(function () {
            // After 2 seconds, send the data to the backend
            sendData(nameValue);
        }, 2000); // 2000ms = 2 seconds
    });

    function sendData(name) {
        fetch('/update-name/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}' // Ensure CSRF token is passed
            },
            body: JSON.stringify({ name: name })
        })
        .then(response => response.json())
        .then(data => {
            // Handle the response from the server
            document.getElementById('status').innerHTML = data.message;
        })
        .catch(error => {
            document.getElementById('status').innerHTML = 'Error updating name!';
        });
    }
</script> --> 

<!-- import json
from django.shortcuts import render

from django.views import View
from django.http import JsonResponse
from django.shortcuts import render


# Create your views here.
def index(request):
    
    return render(request, 'portfolio/chat_form.html')


from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from .models import UserInfo

@csrf_exempt  # To avoid CSRF issues, use this decorator (only for development)
def update_name(request):
    if request.method == 'POST':
        data = json.loads(request.body)  # Parse the JSON data from the request
        name = data.get('name')
        
        # Assuming we update a specific user's data
        user_info, created = UserInfo.objects.get_or_create(id=request.session.get('user_info_id'))
        
        if name:
            user_info.name = name  # Update the user's name
            user_info.save()
            return JsonResponse({'message': 'Name updated successfully!'})
        
        return JsonResponse({'message': 'No name provided!'}, status=400)

    return JsonResponse({'message': 'Invalid request method!'}, status=400) --> 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Profile Form</title>
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>
    <body class="bg-gray-100">
    
        <div class="max-w-4xl mx-auto bg-white p-8 shadow-lg rounded-lg mt-10">
            <!-- Profile Section -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="profile_img">Profile Image</label>
                <input type="file" id="profile_img" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
            </div>
    
            <!-- Name -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="name">Name</label>
                <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                    <span class="flex items-center justify-center w-10 text-gray-500">
                        <i class="fas fa-user"></i>
                    </span>
                    <input type="text" id="name" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="Enter your name" />
                </div>
            </div>
    
            <!-- Bio -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="bio">Bio</label>
                <textarea id="bio" class="w-full p-4 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="4" placeholder="Tell us about yourself"></textarea>
            </div>
    
            <!-- Social Links -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="instagram">Instagram</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-instagram"></i>
                        </span>
                        <input type="text" id="instagram" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="Instagram profile link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="facebook">Facebook</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-facebook"></i>
                        </span>
                        <input type="text" id="facebook" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="Facebook profile link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="tiktok">TikTok</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-tiktok"></i>
                        </span>
                        <input type="text" id="tiktok" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="TikTok profile link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="youtube">YouTube</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-youtube"></i>
                        </span>
                        <input type="text" id="youtube" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="YouTube channel link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="x">X (Twitter)</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-x"></i> <!-- Use appropriate icon for X -->
                        </span>
                        <input type="text" id="x" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="X profile link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="spotify">Spotify</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-spotify"></i>
                        </span>
                        <input type="text" id="spotify" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="Spotify profile link" />
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 text-lg font-bold mb-2" for="linkedin">LinkedIn</label>
                    <div class="flex items-center border rounded-lg focus-within:ring-2 focus-within:ring-blue-500">
                        <span class="flex items-center justify-center w-10 text-gray-500">
                            <i class="fab fa-linkedin"></i>
                        </span>
                        <input type="text" id="linkedin" class="w-full p-4 text-gray-700 focus:outline-none" placeholder="LinkedIn profile link" />
                    </div>
                </div>
            </div>
    
            <!-- Thumbnail Section -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="thumbnail_img">Thumbnail Image</label>
                <input type="file" id="thumbnail_img" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
                <textarea id="thumbnail_desc" class="w-full mt-4 p-4 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" placeholder="Thumbnail description"></textarea>
            </div>
    
            <!-- Section 1 -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="section1_name">Section 1 Name</label>
                <input type="text" id="section1_name" class="w-full p-4 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter section name" />
            </div>
    
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="section1_img">Section 1 Image</label>
                <input type="file" id="section1_img" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
            </div>
    
            <!-- Title -->
            <div class="mb-6">
                <label class="block text-gray-700 text-lg font-bold mb-2" for="title">Title</label>
                <input type="text" id="title" class="w-full p-4 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter title" />
            </div>
    
            <!-- Submit Button -->
            <div class="text-right">
                <button class="px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Submit</button>
            </div>
        </div>
    
    </body>
    </html>
    